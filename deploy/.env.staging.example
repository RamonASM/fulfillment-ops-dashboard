# =============================================================================
# INVENTORY INTELLIGENCE PLATFORM - Staging Environment Configuration
# =============================================================================
# Staging environment for testing before production deployment
# =============================================================================

# =============================================================================
# DEPLOYMENT MODE
# =============================================================================
NODE_ENV=staging
DEPLOYMENT_MODE=docker

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
DB_USER=inventory_staging
DB_PASSWORD=staging_password_change_this
DB_NAME=inventory_staging
DB_HOST=localhost
DB_PORT=5432
DATABASE_URL=postgresql://${DB_USER}:${DB_PASSWORD}@${DB_HOST}:${DB_PORT}/${DB_NAME}?schema=public

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_URL=redis://${REDIS_HOST}:${REDIS_PORT}

# =============================================================================
# API SERVER CONFIGURATION
# =============================================================================
API_PORT=3001
API_URL=https://staging-api.yourtechassist.us
WEB_URL=https://staging-admin.yourtechassist.us
PORTAL_URL=https://staging-portal.yourtechassist.us
CORS_ORIGINS=https://staging-admin.yourtechassist.us,https://staging-portal.yourtechassist.us

# =============================================================================
# SECURITY - JWT & SESSION
# =============================================================================
JWT_SECRET=staging_jwt_secret_change_this
JWT_EXPIRES_IN=1h
JWT_REFRESH_SECRET=staging_refresh_secret_change_this
JWT_REFRESH_EXPIRES_IN=7d
SESSION_SECRET=staging_session_secret_change_this
COOKIE_DOMAIN=.yourtechassist.us
COOKIE_SECURE=true
COOKIE_SAME_SITE=lax

# =============================================================================
# ML ANALYTICS SERVICE
# =============================================================================
ML_ANALYTICS_URL=http://ml-analytics:8000
ML_PORT=8000

# =============================================================================
# EMAIL CONFIGURATION (Use test accounts for staging)
# =============================================================================
SMTP_HOST=smtp.mailtrap.io  # Use Mailtrap or similar for testing
SMTP_PORT=2525
SMTP_SECURE=false
SMTP_USER=mailtrap_username
SMTP_PASS=mailtrap_password
EMAIL_FROM_NAME=Inventory Intelligence (Staging)
EMAIL_FROM_ADDRESS=staging@yourtechassist.us
ENABLE_EMAIL_NOTIFICATIONS=true
ENABLE_PASSWORD_RESET=true

# =============================================================================
# AI FEATURES
# =============================================================================
ANTHROPIC_API_KEY=  # Use test key or limited quota
OPENAI_API_KEY=
ENABLE_AI_INSIGHTS=true
ENABLE_AI_SUMMARIES=true
ENABLE_AI_CHAT=false

# =============================================================================
# FILE STORAGE
# =============================================================================
STORAGE_TYPE=local
UPLOAD_DIR=/app/uploads
MAX_FILE_SIZE=52428800

# =============================================================================
# MONITORING & LOGGING
# =============================================================================
LOG_LEVEL=debug  # More verbose in staging
LOG_FORMAT=json
LOG_FILE=/var/log/inventory/staging-api.log
SENTRY_DSN=  # Optional: separate Sentry project for staging
SENTRY_ENVIRONMENT=staging
ENABLE_PERFORMANCE_MONITORING=true
ENABLE_REQUEST_LOGGING=true

# =============================================================================
# RATE LIMITING (More lenient in staging)
# =============================================================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=500  # Higher limit for testing
RATE_LIMIT_LOGIN_MAX=10

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================
BACKUP_ENABLED=false  # Disable automated backups in staging
BACKUP_DIR=/backups
BACKUP_KEEP_DAYS=3

# =============================================================================
# FEATURE FLAGS
# =============================================================================
ENABLE_CLIENT_PORTAL=true
ENABLE_IMPORTS=true
ENABLE_EXPORTS=true
ENABLE_ANALYTICS_DASHBOARD=true
ENABLE_REAL_TIME_UPDATES=true

# =============================================================================
# DEVELOPMENT/DEBUG (More permissive for staging)
# =============================================================================
DEBUG=true  # Enable debug mode
ENABLE_PLAYGROUND=true  # Enable API playground
PRETTY_ERRORS=true  # Better error formatting

# =============================================================================
# SECURITY HEADERS
# =============================================================================
HSTS_MAX_AGE=31536000
ENABLE_CORS=true
ENABLE_HELMET=true
TRUST_PROXY=true
